<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Weather Map Project</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
</head>
<body>
	<div class="container">
		<section id="currentWeather">
			<h1>Current Weather</h1>
			<div id="currentTemp"></div>
		</section>
		<section id="forecast">
			<h1>5-Day Forecast</h1>
		</section>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
	<script>
		"use strict";

		function findDay(timestamp) {
			let date = new Date(timestamp * 1000);
			return date.getDay();
		}

		function findDate(timestamp) {
			let date = new Date(timestamp * 1000);
			return date.toDateString();
		}

		function findTime(timestamp) {
			let date = new Date(timestamp * 1000);
			return date.toLocaleTimeString();
		}

		$.get("http://api.openweathermap.org/data/2.5/weather", {
			APPID: "6e012c72dafdbe01041ba5e6cc13c62b",
			id: 4726206,
			units: "imperial"
		}).done(function (data) {
			console.log(data);
		});
		$.get("http://api.openweathermap.org/data/2.5/forecast", {
			APPID: "6e012c72dafdbe01041ba5e6cc13c62b",
			id: 4726206,
			units: "imperial"
		}).done(function (data) {
			console.log(data);
			let firstDay = findDay(data.list[0].dt);
			for (let i = 0; i < 5; i++) {
				let card = document.createElement("div");
				card.setAttribute("class", "card");
				card.setAttribute("id", (i + firstDay).toString());
				$("#forecast").append(card);
			}
			data.list.forEach(function (forecast) {
				let forecastDate = forecast.dt;
				let day = findDay(forecastDate);
				if (!document.getElementById("day" + day)) {
					let dateHeader = document.createElement("h2");
					dateHeader.setAttribute("id", "day" + day);
					dateHeader.innerText = findDate(forecastDate);
					$("#" + day.toString()).append(dateHeader);
				}
				let forecastOfDay = document.createElement("div");
				forecastOfDay.innerHTML = findTime(forecastDate) + " " + Math.floor(forecast.main.temp) + "&#8457;";
				$("#day" + day).append(forecastOfDay);
			});
		});
	</script>
</body>
</html>